<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sysrule_assignment">
    <sysrule_assignment action="DELETE">
        <active>true</active>
        <condition table="x_1850913_facili_0_facility_issue">assigned_toISEMPTY^EQ<item endquery="false" field="assigned_to" goto="false" newquery="false" operator="ISEMPTY" or="false" value=""/>
            <item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/>
        </condition>
        <description/>
        <group/>
        <match_conditions>ALL</match_conditions>
        <name>Facility Issue Technician Assignment</name>
        <order>100</order>
        <script>(function runRule(current, template) {&#13;
    var minSkill = 0;&#13;
    switch(current.priority + "") {&#13;
        case '1': minSkill = 8; break; // Critical&#13;
        case '2': minSkill = 6; break; // High&#13;
        case '3': minSkill = 4; break; // Medium&#13;
        default: minSkill = 0;        // Low&#13;
    }&#13;
&#13;
    var tech = new GlideRecord('x_1850913_facili_0_technician_profile');&#13;
    tech.addQuery('u_assignment_group', current.assignment_group);&#13;
    tech.addQuery('active', true);&#13;
    tech.addQuery('skill_rate', '&gt;=', minSkill);&#13;
    tech.orderByDesc('skill_rate');&#13;
    tech.query();&#13;
&#13;
    while (tech.next()) {&#13;
        var issueCheck = new GlideRecord('x_1850913_facili_0_facility_issue');&#13;
        issueCheck.addQuery('assigned_to', tech.user);&#13;
        issueCheck.addQuery('state', 'NOT IN', '6,7'); // closed&#13;
        issueCheck.setLimit(1);&#13;
        issueCheck.query();&#13;
&#13;
        if (!issueCheck.hasNext()) {&#13;
            current.assigned_to = tech.user;&#13;
            break;&#13;
        }&#13;
    }&#13;
&#13;
})(current, template);</script>
        <sys_class_name>sysrule_assignment</sys_class_name>
        <sys_created_by>Omar</sys_created_by>
        <sys_created_on>2025-12-26 00:02:01</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>2225c52583caf2104acac396feaad3bd</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>Facility Issue Technician Assignment</sys_name>
        <sys_overrides/>
        <sys_package display_value="Facility Issue Reporting System " source="x_1850913_facili_0">1cf4c9a3833d32104acac396feaad3c1</sys_package>
        <sys_policy/>
        <sys_scope display_value="Facility Issue Reporting System ">1cf4c9a3833d32104acac396feaad3c1</sys_scope>
        <sys_update_name>sysrule_assignment_2225c52583caf2104acac396feaad3bd</sys_update_name>
        <sys_updated_by>Omar</sys_updated_by>
        <sys_updated_on>2025-12-26 00:03:48</sys_updated_on>
        <table>x_1850913_facili_0_facility_issue</table>
        <user/>
    </sysrule_assignment>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Facility Issue Reporting System ">1cf4c9a3833d32104acac396feaad3c1</application>
        <file_path/>
        <instance_id>4d06b993dbd2395005ef17291396195a</instance_id>
        <instance_name>dev209771</instance_name>
        <name>sysrule_assignment_2225c52583caf2104acac396feaad3bd</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sysrule_assignment"><sysrule_assignment action="INSERT_OR_UPDATE"><active>true</active><condition table="x_1850913_facili_0_facility_issue">assigned_toISEMPTY^EQ<item endquery="false" field="assigned_to" goto="false" newquery="false" operator="ISEMPTY" or="false" value=""/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></condition><description/><group/><match_conditions>ALL</match_conditions><name>Facility Issue Technician Assignment</name><order>100</order><script>(function runRule(current, template) {&#13;
    var minSkill = 0;&#13;
    switch(current.priority + "") {&#13;
        case '1': minSkill = 8; break; // Critical&#13;
        case '2': minSkill = 6; break; // High&#13;
        case '3': minSkill = 4; break; // Medium&#13;
        default: minSkill = 0;        // Low&#13;
    }&#13;
&#13;
    var tech = new GlideRecord('x_1850913_facili_0_technician_profile');&#13;
    tech.addQuery('u_assignment_group', current.assignment_group);&#13;
    tech.addQuery('active', true);&#13;
    tech.addQuery('skill_rate', '&gt;=', minSkill);&#13;
    tech.orderByDesc('skill_rate');&#13;
    tech.query();&#13;
&#13;
    while (tech.next()) {&#13;
        var issueCheck = new GlideRecord('x_1850913_facili_0_facility_issue');&#13;
        issueCheck.addQuery('assigned_to', tech.user);&#13;
        issueCheck.addQuery('state', 'NOT IN', '6,7'); // closed&#13;
        issueCheck.setLimit(1);&#13;
        issueCheck.query();&#13;
&#13;
        if (!issueCheck.hasNext()) {&#13;
            current.assigned_to = tech.user;&#13;
            break;&#13;
        }&#13;
    }&#13;
&#13;
})(current, template);</script><sys_class_name>sysrule_assignment</sys_class_name><sys_created_by>Omar</sys_created_by><sys_created_on>2025-12-26 00:02:01</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>2225c52583caf2104acac396feaad3bd</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Facility Issue Technician Assignment</sys_name><sys_overrides/><sys_package display_value="Facility Issue Reporting System " source="x_1850913_facili_0">1cf4c9a3833d32104acac396feaad3c1</sys_package><sys_policy/><sys_scope display_value="Facility Issue Reporting System ">1cf4c9a3833d32104acac396feaad3c1</sys_scope><sys_update_name>sysrule_assignment_2225c52583caf2104acac396feaad3bd</sys_update_name><sys_updated_by>Omar</sys_updated_by><sys_updated_on>2025-12-26 00:03:48</sys_updated_on><table>x_1850913_facili_0_facility_issue</table><user/></sysrule_assignment></record_update>]]></payload>
        <payload_hash>-193783393</payload_hash>
        <record_name>Facility Issue Technician Assignment</record_name>
        <reverted_from/>
        <source>e918a127837172104acac396feaad311</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>Omar</sys_created_by>
        <sys_created_on>2025-12-26 00:03:48</sys_created_on>
        <sys_id>9d1681a583caf2104acac396feaad32a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>19b57f7fb940000001</sys_recorded_at>
        <sys_updated_by>Omar</sys_updated_by>
        <sys_updated_on>2025-12-26 00:03:48</sys_updated_on>
        <type>Assignment Rule</type>
        <update_guid>4d1681a545caf21086ff24ab9ed37029</update_guid>
        <update_guid_history>4d1681a545caf21086ff24ab9ed37029:-193783393,53a5c56580caf21095bb487166498c59:-1274698890</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>Omar</sys_created_by>
        <sys_created_on>2025-12-26 00:05:13</sys_created_on>
        <sys_db_object display_value="" name="sysrule_assignment">sysrule_assignment</sys_db_object>
        <sys_id>2a0feba2f3e14240b29dc801ac8ea400</sys_id>
        <sys_metadata>2225c52583caf2104acac396feaad3bd</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Facility Issue Technician Assignment</sys_name>
        <sys_package display_value="Facility Issue Reporting System " source="x_1850913_facili_0">1cf4c9a3833d32104acac396feaad3c1</sys_package>
        <sys_parent display_value="Facility Issue">d9ddc1e7837d32104acac396feaad370</sys_parent>
        <sys_policy/>
        <sys_scope display_value="Facility Issue Reporting System ">1cf4c9a3833d32104acac396feaad3c1</sys_scope>
        <sys_scope_delete display_value="">924c0ad459574d888e1a48db986a4690</sys_scope_delete>
        <sys_update_name>sysrule_assignment_2225c52583caf2104acac396feaad3bd</sys_update_name>
        <sys_update_version display_value="sysrule_assignment_2225c52583caf2104acac396feaad3bd">9d1681a583caf2104acac396feaad32a</sys_update_version>
        <sys_updated_by>Omar</sys_updated_by>
        <sys_updated_on>2025-12-26 00:05:13</sys_updated_on>
    </sys_metadata_delete>
</record_update>
